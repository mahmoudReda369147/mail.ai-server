// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum ReplayTony {
  Professional
  Friendly
  Concise
  Detailed
}

model User {
  id            String   @id @default(cuid())
  email         String   @unique
  name          String?
  accessToken   String?  @db.Text
  refreshToken  String?  @db.Text
  tokenExpiry   DateTime?
  gmailHistoryId String? // Gmail API history ID for tracking new messages
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@map("users")
}

model Templete {
  id          String   @id @default(cuid())
  name        String
  subject     String
  body        String
  categure    String
  usedtimes   Int      @default(0)
  isFavorets  Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("templets")
}

model TemplateCategory {
  id        String   @id @default(cuid())
  Name      String
  userId    String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("template_categories")
}

model SendedEmail {
  id          String   @id @default(cuid())
  emailId     String
  theridedId  String
  userId      String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("sended_emails")
}

model CalendarTask {
  id              String   @id @default(cuid())
  title           String
  description     String?
  dueDate         DateTime
  status          String   @default("pending") // pending, completed, cancelled
  priority        String   @default("medium") // low, medium, high
  userId          String
  gmailId         String?
  googleEventId   String?  // Google Calendar event ID
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("calendar_tasks")
}
model Task {
  id              String   @id @default(cuid())
  task           String
  taskDate         DateTime?
  isDoneTask          Boolean   @default(false)
  priority        String   @default("medium") // low, medium, high
  userId          String
  gmailId         String?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  @@map("tasks")
}

model AiSummarys {
  id              String   @id @default(cuid())
  summary         String
  priority        Int   
  userId          String
  gmailId         String?

  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("ai_summarys")
}

model Bots{
  id              String   @id @default(cuid())
  emails          String
  botName         String
  description     String?
  userId          String
  isactive        Boolean  @default(true)
  replayTony      ReplayTony
  isAutoReply     Boolean  @default(false)
  userPrompet     String
  isautoSummarize Boolean  @default(false)
  isautoExtractTaskes Boolean  @default(false)
  isautoExtractMettengs Boolean  @default(false)

  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  @@map("bots")
}